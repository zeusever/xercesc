lemon_scan_files(SRC
  "Source Files" 
  ${CMAKE_CURRENT_SOURCE_DIR} 
  IGNORE_REGULAR_EXPRESSION "FileManagers|MsgLoaders|MutexManagers|NetAccessors|Transcoders" 
  PATTERNS  *.cpp *.cxx)

IF(WIN32)
  if(LEMON_LIBRARY_TYPE_STATIC)
    ADD_DEFINITIONS(/DHAVE_CONFIG_H /DXERCES_BUILDING_LIBRARY 
      /wd"4996" /wd"4127" /wd"4100" /wd"4189" /wd"4244" /wd"4245" /wd"4702" /wd"4310" /wd"4355" /wd"4512" 
      /D_CRT_SECURE_NO_WARNINGS)
  else()
    ADD_DEFINITIONS(/DHAVE_CONFIG_H /DDLL_EXPORT 
      /DXERCES_BUILDING_LIBRARY 
      /wd"4996" /wd"4127" /wd"4100" /wd"4189" /wd"4244" /wd"4245" /wd"4702" /wd"4310" /wd"4355" /wd"4512" 
      /D_CRT_SECURE_NO_WARNINGS)
  endif()
ENDIF()


IF(XERCES_USE_FILEMGR_POSIX)
	SET(FILEMANANGERS_SRCS ${CMAKE_CURRENT_SOURCE_DIR}/util/FileManagers/PosixFileMgr.cpp)
ELSE()
	SET(FILEMANANGERS_SRCS ${CMAKE_CURRENT_SOURCE_DIR}/util/FileManagers/WindowsFileMgr.cpp)
ENDIF(XERCES_USE_FILEMGR_POSIX)

LIST(APPEND SOURCE_FILES_PLATFORM_SPECIAL ${FILEMANANGERS_SRCS})

SOURCE_GROUP("source files\\util\\FileManagers" FILES ${FILEMANANGERS_SRCS})

IF(XERCES_USE_MSGLOADER_ICONV)
	SET(MSGLOADER_SRCS ${CMAKE_CURRENT_SOURCE_DIR}/util/MsgLoaders/MsgCatalog/MsgCatalog.cpp)
ELSEIF(XERCES_USE_MSGLOADER_ICU)
	SET(MSGLOADER_SRCS ${CMAKE_CURRENT_SOURCE_DIR}/util/MsgLoaders/ICU/ICUMsgLoader.cpp)
ELSEIF(XERCES_USE_MSGLOADER_INMEMORY)
	SET(MSGLOADER_SRCS ${CMAKE_CURRENT_SOURCE_DIR}/util/MsgLoaders/InMemory/InMemMsgLoader.cpp)
ELSE()
	SET(MSGLOADER_SRCS ${CMAKE_CURRENT_SOURCE_DIR}/util/MsgLoaders/Win32/Win32MsgLoader.cpp)
ENDIF()

LIST(APPEND SOURCE_FILES_PLATFORM_SPECIAL ${MSGLOADER_SRCS})

SOURCE_GROUP("source files\\util\\MsgLoaders" FILES ${MSGLOADER_SRCS})


IF(XERCES_USE_MUTEXMGR_NOTHREAD)
	SET(MUTEXMGR_SRCS ${CMAKE_CURRENT_SOURCE_DIR}/util/MutexManagers/NoThreadMutexMgr.cpp)
ELSEIF(XERCES_USE_MUTEXMGR_POSIX)
	SET(MUTEXMGR_SRCS ${CMAKE_CURRENT_SOURCE_DIR}/util/MutexManagers/PosixMutexMgr.cpp)
ELSE()
	SET(MUTEXMGR_SRCS ${CMAKE_CURRENT_SOURCE_DIR}/util/MutexManagers/WindowsMutexMgr.cpp)
ENDIF()

LIST(APPEND SOURCE_FILES_PLATFORM_SPECIAL ${MUTEXMGR_SRCS})

SOURCE_GROUP("source files\\util\\MutexManagers" FILES ${MUTEXMGR_SRCS})


IF(XERCES_USE_NETACCESSOR_CFURL)
	SET(NETACCESSOR_SRCS 
	${CMAKE_CURRENT_SOURCE_DIR}/util/NetAccessors/MacOSURLAccessCF/MacOSURLAccessCF.cpp
	${CMAKE_CURRENT_SOURCE_DIR}/util/NetAccessors/MacOSURLAccessCF/URLAccessCFBinInputStream.cpp
	)
ELSEIF(XERCES_USE_NETACCESSOR_CURL)
	SET(NETACCESSOR_SRCS 
	${CMAKE_CURRENT_SOURCE_DIR}/util/NetAccessors/Curl/CurlNetAccessor.cpp
	${CMAKE_CURRENT_SOURCE_DIR}/util/NetAccessors/Curl/CurlURLInputStream.cpp
	)
ELSEIF(XERCES_USE_NETACCESSOR_SOCKET)
	SET(NETACCESSOR_SRCS 
	${CMAKE_CURRENT_SOURCE_DIR}/util/NetAccessors/Socket/SocketNetAccessor.cpp
	${CMAKE_CURRENT_SOURCE_DIR}/util/NetAccessors/Socket/UnixHTTPURLInputStream.cpp
	)
ELSE()
	SET(NETACCESSOR_SRCS 
	${CMAKE_CURRENT_SOURCE_DIR}/util/NetAccessors/WinSock/BinHTTPURLInputStream.cpp
	${CMAKE_CURRENT_SOURCE_DIR}/util/NetAccessors/WinSock/WinSockNetAccessor.cpp
	)
ENDIF()

LIST(APPEND SOURCE_FILES_PLATFORM_SPECIAL ${NETACCESSOR_SRCS} ${CMAKE_CURRENT_SOURCE_DIR}/util/NetAccessors/BinHTTPInputStreamCommon.cpp)

SOURCE_GROUP("source files\\util\\NetAccessors" FILES ${NETACCESSOR_SRCS})


IF(XERCES_USE_TRANSCODER_GNUICONV)
	SET(TRANSCODER_SRCS ${CMAKE_CURRENT_SOURCE_DIR}/util/Transcoders/IconvGNU/IconvGNUTransService.cpp)
ELSEIF(XERCES_USE_TRANSCODER_ICONV)
	SET(TRANSCODER_SRCS ${CMAKE_CURRENT_SOURCE_DIR}/util/Transcoders/Iconv/IconvTransService.cpp)
ELSEIF(XERCES_USE_TRANSCODER_ICU)
	SET(TRANSCODER_SRCS ${CMAKE_CURRENT_SOURCE_DIR}/util/Transcoders/ICU/ICUTransService.cpp)
ELSEIF(XERCES_USE_TRANSCODER_MACOSUNICODECONVERTER)
	SET(TRANSCODER_SRCS ${CMAKE_CURRENT_SOURCE_DIR}/util/Transcoders/MacOSUnicodeConverter/MacOSUnicodeConverter.cpp)
ELSE()
	SET(TRANSCODER_SRCS ${CMAKE_CURRENT_SOURCE_DIR}/util/Transcoders/Win32/Win32TransService.cpp)
ENDIF()

LIST(APPEND SOURCE_FILES_PLATFORM_SPECIAL ${TRANSCODER_SRCS})

SOURCE_GROUP("source files\\util\\Transcoders" FILES ${TRANSCODER_SRCS})

include_directories(${CMAKE_CURRENT_SOURCE_DIR})

lemon_library_project(xercesc ${SRC} ${SOURCE_FILES_PLATFORM_SPECIAL})